@using Microsoft.AspNetCore.Http;
@{
    ViewData["Title"] = "Index";
}

<h2>Cart</h2>

<table class="table">
    <tr>
        <th>Options</th>
        <th>Id</th>
        <th>Name</th>
        <th>Photo</th>
        <th>Price</th>
        <th>Seats</th>
        <th>SubTotal</th>
    </tr>
    @foreach (var item in ViewBag.bookmovie)
    {
    <tr>
        <td><a asp-controller="booking" asp-action="Remove" asp-route-id="@item.Movies.MovieId">Remove</a></td>
        <td>@item.Movies.MovieId</td>
        <td>@item.Movies.MovieName</td>
        <td><img src="@item.Movies.MovieImage" width="60" /></td>
        <td>@item.Movies.MoviePrice</td>
        <td> <a class="btn btn-default" asp-controller="Booking" asp-action="Minus" asp-route-id="@item.Movies.MovieId">-</a>@item.Quantity<a class="btn btn-default" asp-controller="Booking" asp-action="Plus" asp-route-id="@item.Movies.MovieId">+</a></td>


        <td>@(item.Movies.MoviePrice * item.Quantity)</td>
    </tr>
    }
    <tr>
        <td align="right" colspan="6"><b>Sum</b></td>
        <td>
            @ViewBag.total
        </td>
    </tr>
</table>

<hr />

@if (Context.Session.GetString("uname") == null)
{

    <html>
    <head>
        <script type="text/javascript">
         <!--
            function Warn() {

                alert("Please Sign In ");
                //document.write(<a asp-controller="Ticket" asp-action="Register" class="btn btn-secondary">Sign In</a>);

            }
            //-->
        </script>
    </head>

    <body>


        <form>
            <a asp-controller="Ticket" asp-action="Login" type="button" class="btn btn-info" onclick="Warn();">Proceed</a>
        </form>
    </body>
</html>


}
else
{

<a class="btn btn-info" asp-action="Checkout" asp-controller="Ticket">Proceed</a>
}


